// Multiple video YouTube API FROM data-ytid
// http://jsfiddle.net/onigetoc/bn5vwo1j/

$('.video-embed-field-provider-youtube').addClass('ytplayer');
$('.video-embed-field-provider-youtube').attr('id', 'player1');

var tag = document.createElement('script');
tag.src = "https://www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);


var qwe = $('.video-embed-field-provider-youtube iframe')[0].src;
  
 var res = qwe.replace("https://www.youtube.com/embed/", "");
 var res2 = res.replace("?autoplay=1&amp;start=0&amp;rel=0", "");

	//alert(qwe);

var playerInfoList = [{
    id: 'player1',
    height: '250',
    width: '420',
    videoId: res2
}];



var players = new Array();


//events...

$(document).ready(function () {
    $('#stop').click(function () {
        //loop players array to stop them all
        $(players).each(function (i) {
            console.log(this);
            this.stopVideo();
        });
    });
})


//functions....

function onYouTubeIframeAPIReady() {
    if (typeof playerInfoList === 'undefined') return;
    
    for (var i = 0; i < playerInfoList.length; i++) {
        var curplayer = createPlayer(playerInfoList[i]);
        players[i] = curplayer;
    }
}


function createPlayer(playerInfo) {
    var ytvid = new YT.Player(playerInfo.id, {
        height: playerInfo.height,
        width: playerInfo.width,
        videoId: playerInfo.videoId,
        playerVars: { 
          autoplay: 0,
          controls: 1, 
          rel : 0,
          fs : 0,
        }
    });
    
    $("#"+playerInfo.id).before('<div id="ytcontrol-'+playerInfo.id+'" class="ytcontrol">: <a href="#" id="ytplay-'+playerInfo.id+'">Play</a> &bull; <a href="#" id="ytpause-'+playerInfo.id+'">Pause</a> &bull; <a href="#" id="ytstop-'+playerInfo.id+'">Stop</a></div>');
 
    document.getElementById("ytplay-"+playerInfo.id).onclick = function() {
        ytvid.playVideo();
        return false;
    };
 
    document.getElementById("ytpause-"+playerInfo.id).onclick = function() {
        ytvid.pauseVideo();
        return false;
    };
  
    document.getElementById("ytstop-"+playerInfo.id).onclick = function() {
        ytvid.stopVideo();
        return false;
    };
    
       return ytvid;
    
}




